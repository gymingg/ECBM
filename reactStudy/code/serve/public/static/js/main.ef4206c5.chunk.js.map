{"version":3,"sources":["components/header/header.module.less","pages/category/category.module.less","pages/home/home.module.less","components/linkButton/linkButton.module.less","axios.js","pages/login/login.jsx","pages/login/images/logo.png","static/menuList.js","components/left-nav/left-nav.jsx","assets/logo.png","components/header/header.jsx","pages/home/home.jsx","pages/category/components/addForm.jsx","pages/category/components/updateForm.jsx","pages/category/category.jsx","components/linkButton/index.jsx","static/router.js","pages/product/pages/pictureUpload.jsx","pages/product/pages/rich-text-editor.jsx","pages/product/pages/addProduct.jsx","pages/product/pages/home.jsx","pages/product/pages/detail.jsx","pages/product/product.jsx","pages/role/add-form.jsx","pages/role/formateDate.js","pages/role/auth-form.jsx","pages/role/role.jsx","pages/user/user-form.jsx","pages/user/user.jsx","pages/admin/admin.jsx","App.js","index.js"],"names":["module","exports","axios","defaults","baseURL","NormalLoginForm","props","onFinish","values","a","post","res","data","status","message","success","user","password","store","set","history","replace","error","msg","name","className","initialValues","remember","Item","rules","required","min","prefix","UserOutlined","placeholder","LockOutlined","type","htmlType","Login","get","_id","to","src","alt","this","React","Component","menuList","title","key","icon","HomeOutlined","isPublic","AppstoreOutlined","children","BarsOutlined","ToolOutlined","SafetyOutlined","SubMenu","LeftNav","hasAuth","item","role","username","menus","indexOf","find","citem","menuNodes","openKey","path","location","pathname","reduce","pre","console","log","push","renderMenu","menuInfo","selectedKeys","defaultOpenKeys","mode","theme","confirm","Header","state","weather","currentTime","intervalID","getWeather","bind","getTime","logout","Promise","resolve","reject","jsonp","err","setInterval","date","Date","nowDate","toLocaleDateString","toLocaleTimeString","setState","forEach","ExclamationCircleOutlined","onOk","remove","then","result","wea","getTitle","newprops","clearInterval","styles","container","headerTop","blue","onClick","headerBottom","headerBottomLeft","headerBottomRight","Home","Option","AddForm","useForm","form","parentId","dataSource","setForm","initialValue","value","map","UpdateCategory","categoryName","setFieldsValue","Category","columns","dataIndex","width","render","categories","showUpdateForm","style","marginRight","getSubCategory","subSource","parentName","loading","isVisible","inputValue","getCategory","params","showFirstCategory","showAddForm","hiddenForm","resetFields","getInputValue","e","target","addCategory","validateFields","getFieldValue","catch","updateCategory","id","categoryId","ArrowRightOutlined","extra","PlusOutlined","rowKey","pagination","defaultPageSize","bordered","getContainer","visible","onCancel","LinkButton","link","getBase64","file","reader","FileReader","readAsDataURL","onload","onerror","PicturesWall","baseRoute","BaseRoute","baseImageRoute","handleCancel","previewVisible","handlePreview","url","preview","originFileObj","previewImage","previewTitle","substring","lastIndexOf","handleChange","fileList","response","length","imgs","index","uid","uploadButton","marginTop","action","accept","listType","onPreview","onChange","footer","RichTextEditor","editorState","EditorState","createEmpty","onEditorStateChange","getDetail","draftToHtml","convertToRaw","getCurrentContent","uploadImageCallBack","xhr","XMLHttpRequest","open","FormData","append","send","addEventListener","JSON","parse","responseText","html","detail","contentBlock","htmlToDraft","contentState","ContentState","createFromBlockArray","contentBlocks","createWithContent","editorStyle","border","minHeight","paddingLeft","toolbar","image","uploadCallback","present","mandatory","TextArea","AddProduct","options","createRef","pw","editor","loadData","selectedOptions","targetOption","label","isLeaf","initeCategory","isPut","product","pCategoryId","subCategory","onSubmit","current","getFileList","category","price","desc","goBack","ArrowLeftOutlined","ref","labelCol","span","wrapperCol","autoSize","minRows","maxRows","validator","validateNumber","addonAfter","offset","c","newStatus","updateStatus","total","pageSize","productId","getProducts","pageNum","list","margin","showQuickJumper","ProductDetail","cName1","cName2","all","results","fontSize","img","height","dangerouslySetInnerHTML","__html","Product","exact","component","Detail","formateDate","time","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","AuthForm","TreeNode","getMenus","checkedKeys","getTreeNodes","onCheck","treeNodes","nextProps","disabled","checkable","defaultExpandAll","treeData","PureComponent","Role","roles","isShowAdd","isShowAuth","auth","initColumn","create_time","getRoles","onRow","event","addRole","roleName","updateRole","auth_name","auth_time","role_id","info","setTree","rowSelection","selectedRowKeys","onSelect","UserForm","undefined","phone","email","User","users","isShow","initColumns","roleNames","showUpdate","deleteUser","initRoleNames","showAdd","userId","getUsers","addOrUpdateUser","getFieldsValue","Footer","Sider","Content","Admin","left","overflow","position","marginLeft","padding","backgroundColor","App","ReactDOM","document","getElementById"],"mappings":"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","file":"static/js/main.ef4206c5.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"container--1Hb7v\",\"headerTop\":\"headerTop--3C98c\",\"blue\":\"blue--2sibW\",\"headerBottom\":\"headerBottom--3lSZq\",\"headerBottomLeft\":\"headerBottomLeft--vmNtU\",\"headerBottomRight\":\"headerBottomRight--1t5Gr\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"container--UpqUz\",\"blue\":\"blue--1gOj0\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"title\":\"title--1sXqa\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"link\":\"link--2wUS1\"};","import axios from 'axios'\r\n\r\naxios.defaults.baseURL = \"http://localhost:5000\"\r\n\r\nexport default axios","import React from 'react'\r\nimport {Redirect} from 'react-router-dom'\r\nimport './login.less'\r\nimport logo from './images/logo.png'\r\nimport { Button,Form, Input, message} from 'antd';\r\nimport { UserOutlined, LockOutlined } from '@ant-design/icons';\r\nimport axios from '../../axios.js'\r\nimport store from 'store'\r\n//antd登入表单\r\nconst NormalLoginForm = (props) => {\r\n    //\t提交表单且数据验证成功后回调事件\r\n    const onFinish = async (values) => {\r\n      let {data:res} = await axios.post('/login',values)\r\n      if(res.status === 0) {\r\n        message.success('登入成功')\r\n        let user = res.data\r\n        delete user.password\r\n        store.set('user',user)\r\n        props.history.replace('/')\r\n      }else{\r\n          message.error('登入失败 '+ res.msg)\r\n      }\r\n    };\r\n\r\n    return (\r\n      <Form\r\n        name=\"normal_login\"\r\n        className=\"login-form\"\r\n        initialValues={{ remember: true}}\r\n        onFinish={onFinish}\r\n      >\r\n        <Form.Item\r\n          name=\"username\"\r\n          rules={[{ required: true, message: '请输入账号' },\r\n          { min:4, message: '账号不得低于4位数'}]}\r\n        >\r\n          <Input prefix={<UserOutlined className=\"site-form-item-icon\" />} placeholder=\"Username\" />\r\n        </Form.Item>\r\n        <Form.Item\r\n          name=\"password\"\r\n          rules={[\r\n                { required: true, message: '请输入密码' },\r\n                { min:4, message: '密码不得低于4位数'}\r\n            ]}\r\n            \r\n        >\r\n          <Input\r\n            prefix={<LockOutlined className=\"site-form-item-icon\" />}\r\n            type=\"password\"\r\n            placeholder=\"Password\"\r\n          />\r\n        </Form.Item>\r\n  \r\n        <Form.Item>\r\n          <Button type=\"primary\" htmlType=\"submit\" className=\"login-form-button\">\r\n            Log in\r\n          </Button>\r\n        </Form.Item>\r\n      </Form>\r\n    );\r\n  };\r\n\r\n//登入的组件\r\nexport default class Login extends React.Component{\r\n    render(){\r\n      //判断是否登入，若已登入则跳转到主页\r\n        const user = store.get('user')\r\n        if(user && user._id) {\r\n          return <Redirect to=\"/\"></Redirect>\r\n        }\r\n        return (\r\n            <div className=\"login\">\r\n                <header>\r\n                    <img src={logo} alt=\"logo\"/>\r\n                    <h1>欢迎来到后台管理页面</h1>\r\n                </header>\r\n                <div className=\"content\">\r\n                    <h1>LOGIN</h1>\r\n                    <NormalLoginForm {...this.props}></NormalLoginForm>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}","export default \"data:image/png;base64,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\"","import {\r\n    AppstoreOutlined,\r\n    ToolOutlined,\r\n    SafetyOutlined,\r\n    UserOutlined,\r\n    HomeOutlined,\r\n    AreaChartOutlined,\r\n    BarsOutlined\r\n  } from \"@ant-design/icons\";\r\nconst menuList = [\r\n  {\r\n    title: \"首页\", // 菜单标题名称\r\n    key: \"/home\", // 对应的 path\r\n    icon: <HomeOutlined />, // 图标名称\r\n    isPublic:true\r\n  },\r\n  {\r\n    title: \"商品\",\r\n    key: \"/products\",\r\n    icon: <AppstoreOutlined />,\r\n    children: [\r\n      // 子菜单列表\r\n      {\r\n        title: \"品类管理\",\r\n        key: \"/category\",\r\n        icon: <BarsOutlined />,\r\n      },\r\n      {\r\n        title: \"商品管理\",\r\n        key: \"/product\",\r\n        icon: <ToolOutlined />,\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    title: \"用户管理\",\r\n    key: \"/user\",\r\n    icon: <UserOutlined />,\r\n  },\r\n  {\r\n    title: \"角色管理\",\r\n    key: \"/role\",\r\n    icon: <SafetyOutlined />,\r\n  },\r\n];\r\nexport default menuList;\r\n","import React from \"react\";\r\nimport \"./left-nav.less\";\r\nimport image from \"../../assets/logo.png\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { Menu } from \"antd\";\r\nimport menuInfo from '../../static/menuList.js'\r\nimport store from 'store'\r\nconst { SubMenu } = Menu;\r\nexport default class LeftNav extends React.Component {\r\n    constructor(props){\r\n        super(props)\r\n        this.menuNodes = []\r\n        this.openKey = ''\r\n    }\r\n\r\n    hasAuth = (item) => {\r\n      const {key,children,isPublic} = item\r\n      const user = store.get('user')\r\n      const {role,username} = user\r\n      const menus = role.menus\r\n      if( username == \"admin\" || menus.indexOf(key) !== -1 || isPublic ) {\r\n        return true\r\n      }else if(children) {\r\n        return children.find(citem => menus.indexOf(citem.key) !== -1)\r\n      }\r\n\r\n      return false\r\n    }\r\n\r\n    //动态渲染menu.item标签\r\n    renderMenu(menuList){\r\n        /**\r\n         * 数据格式\r\n         * {\r\n            title: \"首页\", // 菜单标题名称\r\n            key: \"/home\", // 对应的 path\r\n            icon: \"home\", // 图标名称\r\n            chileren:[] //子标签\r\n            }\r\n         */\r\n        let path = this.props.location.pathname\r\n        if(path.indexOf('/product') === 0) {\r\n           path = '/product'\r\n        }\r\n        return menuList.reduce( (pre,item) => {\r\n            //判断是否有子标签\r\n            if(this.hasAuth(item)) {\r\n              console.log(item)\r\n                if (!item.children) {\r\n                  //无子标签则渲染menu.item\r\n                pre.push(<Menu.Item key={item.key} icon={item.icon}>\r\n                  <Link to={item.key}>{item.title}</Link>\r\n              </Menu.Item>)\r\n                }else {\r\n                  const isOpenKey = item.children.find( citem => citem.key === path)\r\n                  if(isOpenKey){\r\n                      this.openKey = item.key\r\n                  }\r\n                pre.push(<SubMenu key={item.key} icon={item.icon} title={item.title}>\r\n                  {this.renderMenu(item.children)}\r\n                  </SubMenu>)\r\n              }\r\n              console.log(pre)\r\n            }\r\n            return pre\r\n        },[])\r\n    }\r\n    UNSAFE_componentWillMount(){\r\n        this.menuNodes =  this.renderMenu(menuInfo)\r\n    }\r\n  render() {\r\n    let path = this.props.location.pathname\r\n    if(path.indexOf('/product') === 0) {\r\n      path = '/product'\r\n    }\r\n    return (\r\n      <div className=\"container\">\r\n        <Link to=\"/\">\r\n          <div className=\"logo\">\r\n            <img src={image} alt=\"logo\" />\r\n            <h1>MING</h1>\r\n          </div>\r\n        </Link>\r\n        <Menu\r\n          selectedKeys={[path]}\r\n          defaultOpenKeys={[this.openKey]}\r\n          mode=\"inline\"\r\n          theme=\"dark\"\r\n        >\r\n          {this.menuNodes}\r\n        </Menu>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","export default \"data:image/png;base64,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\"","import React from 'react'\r\nimport styles from './header.module.less'\r\nimport jsonp from 'jsonp'\r\nimport menuInfo from '../../static/menuList'\r\nimport { Modal,} from 'antd';\r\nimport { ExclamationCircleOutlined } from '@ant-design/icons';\r\nimport store from 'store'\r\nconst { confirm } = Modal;\r\nexport default class Header extends React.Component{\r\n    constructor(props){\r\n        super(props)\r\n        this.state = {\r\n            weather : '',\r\n            currentTime: '',\r\n            title:''\r\n        }\r\n        this.intervalID = ''\r\n        this.getWeather = this.getWeather.bind(this)\r\n        this.getTime = this.getTime.bind(this)\r\n        this.logout = this.logout.bind(this)\r\n    }\r\n\r\n    //jsonp获取天气信息\r\n    getWeather(){\r\n        return new Promise((resolve,reject) => {\r\n            const url = `https://tianqiapi.com/api?version=v1&appid=41741935&appsecret=1WCZkBa7&city=深圳`\r\n            jsonp(url,{}, async (err,data) => {\r\n                if(!err) {\r\n                    resolve(data)\r\n                }else(\r\n                    reject('获取失败')\r\n                )\r\n            })\r\n        })\r\n    }\r\n\r\n    //获取当前时间\r\n    getTime(){\r\n        this.intervalID = setInterval(async ()=>{\r\n            let date = new Date()\r\n            let nowDate = date.toLocaleDateString()+ ' '+ date.toLocaleTimeString()\r\n            await this.setState({\r\n                currentTime:nowDate\r\n            })\r\n\r\n            // console.log(this.currentTime)\r\n            // console.log(nowDate)\r\n        },1000)\r\n    }\r\n\r\n    //获取当前页面标题\r\n    async getTitle(path = this.props.location.pathname){\r\n        let title\r\n        menuInfo.forEach(item => {\r\n            if(item.key === path) {\r\n              return title = item.title\r\n            }else if(item.children){\r\n                const citem = item.children.find(citem =>  path.indexOf(citem.key) === 0)\r\n                if(citem){\r\n                  return  title = citem.title\r\n                }\r\n            }\r\n        })\r\n        await this.setState({\r\n            title\r\n        })\r\n        return title\r\n    }\r\n\r\n    logout(){\r\n        confirm({\r\n            title: '你确定要退出登入吗?',\r\n            icon: <ExclamationCircleOutlined />,\r\n            onOk:() => {\r\n              store.remove('user')\r\n              this.props.history.replace('/login')\r\n            }\r\n          });\r\n    }\r\n\r\n    componentDidMount(){\r\n        let weather = null\r\n        this.getWeather().then(result => {\r\n            weather = result.data[0].wea\r\n            this.setState({\r\n                weather\r\n            })\r\n        })\r\n        this.getTime()\r\n        this.getTitle()\r\n        console.log('didMounnt')\r\n    }\r\n\r\n    UNSAFE_componentWillReceiveProps(newprops) {\r\n        this.getTitle(newprops.location.pathname)\r\n    }\r\n\r\n    componentWillUnmount(){\r\n        clearInterval(this.intervalID)\r\n    }\r\n\r\n    render(){\r\n        return (\r\n            <div className={styles.container}>\r\n                <div className={styles.headerTop}>\r\n                    <span>Hello {this.props.username}</span>\r\n                    <span className={styles.blue} onClick={this.logout}>退出</span>\r\n                </div>\r\n                <div className={styles.headerBottom}>\r\n                    <div className={styles.headerBottomLeft}>{this.state.title}</div>\r\n                    <div className={styles.headerBottomRight}><span>{this.state.currentTime} </span>{this.state.weather}</div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}","import React from 'react'\r\nimport styles from './home.module.less'\r\n\r\nexport default class Home extends React.Component{\r\n    render(){\r\n        return(\r\n            <div className={styles.title}>欢迎来到后台</div>\r\n        )\r\n    }\r\n}","import React from 'react'\r\nimport {Form, Input, Select} from 'antd'\r\n\r\nconst {Option} = Select\r\n\r\n\r\nexport default function AddForm (props) {\r\n    //获取form表单\r\n    const [form] = Form.useForm()\r\n    //获取父组件传来的属性\r\n    const {parentId,dataSource} = props\r\n    //将form表单传到category组件\r\n    props.setForm(form)\r\n        return(\r\n            <Form\r\n                form = {form}\r\n            >\r\n                <Form.Item initialValue={parentId} name=\"parentId\">\r\n                    <Select >\r\n                        <Option value='0'>一级分类</Option>\r\n                        {\r\n                            dataSource.map(item => <Option key={item._id} value={item._id}>{item.name}</Option>)\r\n                        }\r\n                    </Select>\r\n                </Form.Item>\r\n                <Form.Item \r\n                    name=\"categoryName\" \r\n                    rules={[{ required: true, message: '请输入分类名称' }]}\r\n                >\r\n                    <Input placeholder=\"请输入分类名称\"></Input>\r\n                </Form.Item>\r\n            </Form>\r\n        )\r\n}","import React from 'react'\r\nimport {Form, Input} from 'antd'\r\n\r\nexport default function UpdateCategory (props){\r\n    const [form] = Form.useForm()\r\n    const categoryName = props.categoryName\r\n    console.log(categoryName)\r\n    //设定初始值，因为initValue无法通过setstate更新\r\n    form.setFieldsValue({\r\n        'categoryName': categoryName\r\n        })\r\n    props.setForm(form)\r\n    return (\r\n        <Form form={form}>\r\n            <Form.Item initialValue={categoryName} name=\"categoryName\" rules={[{required: true,message:'请输入分类名'}]}>\r\n                <Input placeholder=\"请输入分类名\"></Input>\r\n            </Form.Item>\r\n        </Form>\r\n    )\r\n}","import React from 'react'\r\nimport styles from './category.module.less'\r\nimport {\r\n    ArrowRightOutlined,\r\n    PlusOutlined\r\n  } from '@ant-design/icons'\r\nimport {Button, Table, Modal, Card,message} from 'antd'\r\nimport axios from 'axios'\r\nimport AddForm from './components/addForm.jsx'\r\nimport UpdateCategory from './components/updateForm.jsx'\r\nexport default class Category extends React.Component{\r\n    state= {\r\n        columns : [\r\n            {\r\n              title: '分类的名称',\r\n              dataIndex: 'name',\r\n              key: 'name',\r\n            },\r\n            {\r\n              title: '操作',\r\n              key: 'operation',\r\n              width:300,\r\n              render:(categories)=>(\r\n                  <div>\r\n                    <span className={styles.blue} onClick={() => (this.showUpdateForm(categories))} style={{marginRight:'10px'}} >修改分类</span>\r\n                    <span className={styles.blue} onClick={()=>(this.getSubCategory(categories))}>查看子分类</span>\r\n                  </div>\r\n              )\r\n            },\r\n          ],\r\n          dataSource : [],\r\n          subSource:[],\r\n          parentId:'0',\r\n          parentName:'一级分类',\r\n          loading:false,\r\n          isVisible: 0, //0全关闭，1展示添加对话框，2展示修改对话框\r\n          categories:{},\r\n          inputValue:''\r\n    }\r\n\r\n    //获取一级或二级分类\r\n    getCategory = async (parentId)=>{\r\n        this.setState({\r\n            loading:true\r\n        })\r\n        parentId = parentId || this.state.parentId\r\n        const {data:dataSource} = await axios.get('/manage/category/list',{params: {parentId}})\r\n        if (dataSource.status === 0) {\r\n            if(this.state.parentId === '0'){\r\n                this.setState({\r\n                    dataSource:dataSource.data,\r\n                    loading:false\r\n                })\r\n            }else{\r\n                this.setState({\r\n                    subSource:dataSource.data,\r\n                    loading:false\r\n                })\r\n            }\r\n            \r\n        }\r\n    }\r\n\r\n\r\n    //获取二级分类\r\n    getSubCategory = async (categories) => {\r\n        await this.setState({\r\n            parentId:categories._id,\r\n            parentName:categories.name\r\n        })\r\n        this.getCategory()\r\n    }\r\n\r\n    //回到一级分类\r\n    showFirstCategory= () => {\r\n        this.setState({\r\n            parentName:'一级分类',\r\n            parentId:'0',\r\n            subSource:[]\r\n        })\r\n    }\r\n\r\n    //展示添加表单\r\n    showAddForm = () => {\r\n        this.setState({\r\n            isVisible:1\r\n        })\r\n    }\r\n\r\n    //展示修改表单\r\n    showUpdateForm = (categories) => {\r\n        this.setState({\r\n            isVisible:2,\r\n            categories\r\n        })\r\n    }\r\n\r\n    //隐藏表单\r\n    hiddenForm = () =>{\r\n        this.form.resetFields()\r\n        this.setState({\r\n            isVisible: 0\r\n        })\r\n    }\r\n\r\n    //获取Input的值\r\n    getInputValue = (e) => {\r\n        console.log(e.target.value)\r\n        this.setState({\r\n            inputValue:e.target.value\r\n        })\r\n    }\r\n\r\n    //添加商品分类\r\n    addCategory = async () => {\r\n        //判断表单是否通过验证，如果通过则执行下列操作\r\n        this.form.validateFields().then(async values => {\r\n            const {parentId,categoryName} = this.form.getFieldValue()\r\n            const {data:res} = await axios.post('manage/category/add',{parentId,categoryName})\r\n            if(res.status === 0){\r\n                this.form.resetFields()\r\n                this.hiddenForm()\r\n                if(parentId === this.state.parentId){\r\n                    this.getCategory()\r\n                }else if(parentId === '0') {\r\n                    this.getCategory('0')\r\n                }\r\n                \r\n            }else{\r\n                message.error('添加失败')\r\n            }\r\n        })\r\n        //未通过验证执行\r\n        .catch(err => {\r\n            message.error('分类名不能为空')\r\n        })\r\n    }\r\n\r\n    //修改分类信息\r\n    updateCategory = async () => {\r\n        this.form.validateFields().then(async (values) => {\r\n                const id = this.state.categories._id\r\n                const name = this.form.getFieldValue('categoryName')\r\n                const {data:res} = await axios.post('/manage/category/update',{categoryId:id,categoryName:name})\r\n                if(res.status === 0) {\r\n                    this.form.resetFields()\r\n                    this.hiddenForm()\r\n                    this.getCategory()\r\n                }\r\n                else{\r\n                    message.error('更新失败')\r\n                }\r\n            })\r\n            .catch(err => {\r\n                message.error('分类名不能为空')\r\n            })\r\n    }\r\n\r\n    componentDidMount(){\r\n        this.getCategory()\r\n    }\r\n\r\n    render(){\r\n        const title = this.state.parentName ==='一级分类'?'一级分类':(<div><span onClick={this.showFirstCategory} style={{marginRight:'5px'}} className={styles.blue}>一级分类</span> <span> <ArrowRightOutlined/>{this.state.parentName} </span></div>)\r\n        const extra = (<Button onClick={this.showAddForm} type=\"primary\"><PlusOutlined />添加分类</Button>)\r\n        const {columns, dataSource, subSource, parentId, loading, isVisible} = this.state;\r\n        const categoryName = this.state.categories.name\r\n        return( \r\n            <Card className={styles.container} title={title} extra={extra}>\r\n                <Table loading={loading} rowKey='_id' pagination={{defaultPageSize:5,}} bordered columns={columns} dataSource={parentId==='0'? dataSource : subSource} />\r\n                <Modal getContainer={false} title=\"添加分类\" visible={isVisible===1?true:false} onOk={this.addCategory} onCancel={this.hiddenForm}>\r\n                    <AddForm parentId={parentId} dataSource={dataSource} setForm={(form)=>{this.form = form}}></AddForm>\r\n                </Modal>\r\n                <Modal getContainer={false} title=\"修改分类\" visible={isVisible===2?true:false} onOk={this.updateCategory} onCancel={this.hiddenForm}>\r\n                    <UpdateCategory setForm={(form) => {this.form = form}} categoryName={categoryName}></UpdateCategory>\r\n                </Modal>\r\n            </Card>\r\n        )\r\n    }\r\n}","import React from 'react'\r\nimport styles from'./linkButton.module.less'\r\nexport default class LinkButton extends React.Component{\r\n\r\n    render(){\r\n        return(\r\n            <span onClick={this.props.onClick} className={styles.link}>{this.props.children}</span>\r\n        )\r\n    }\r\n}","export default  { baseRoute:'http://localhost:5000',baseImageRoute:'http://localhost:5000/upload/'}","import { Upload, Modal, message } from 'antd';\r\nimport { PlusOutlined } from '@ant-design/icons';\r\nimport React from 'react'\r\nimport BaseRoute from '../../../static/router'\r\nimport axios from 'axios'\r\nfunction getBase64(file) {\r\n  return new Promise((resolve, reject) => {\r\n    const reader = new FileReader();\r\n    reader.readAsDataURL(file);\r\n    reader.onload = () => resolve(reader.result);\r\n    reader.onerror = error => reject(error);\r\n  });\r\n}\r\n\r\n//上传图片组件\r\nexport default class PicturesWall extends React.Component {\r\n  \r\n  constructor(props){\r\n    super(props)\r\n    this.state={\r\n      previewVisible: false,\r\n      previewImage: '',\r\n      previewTitle: '',\r\n      fileList: [],\r\n    }\r\n    \r\n  }\r\n  baseRoute = BaseRoute.baseRoute\r\n  baseImageRoute = BaseRoute.baseImageRoute\r\n  //隐藏放大镜效果\r\n  handleCancel = () => this.setState({ previewVisible: false });\r\n\r\n  handlePreview = async file => {\r\n    if (!file.url && !file.preview) {\r\n      //当图片还没上传时根据base64获取图片\r\n      file.preview = await getBase64(file.originFileObj);\r\n    }\r\n\r\n    this.setState({\r\n      previewImage: file.url || file.preview,\r\n      previewVisible: true,\r\n      previewTitle: file.name || file.url.substring(file.url.lastIndexOf('/') + 1),\r\n    });\r\n  };\r\n  //获取照片名\r\n  getFileList(){\r\n      return this.state.fileList.map(item => {\r\n          return item.name\r\n      })\r\n  }\r\n  //上传照片\r\n  handleChange = async ({ file,fileList }) => {\r\n      const res = file.response\r\n      console.log(fileList)\r\n      if(file.status === 'done'){\r\n        if(res.status === 0){\r\n            message.success('上传成功')\r\n            const {name, url } = res.data\r\n            file = fileList[fileList.length-1]\r\n            file.name = name\r\n            file.url = url\r\n        }else{\r\n            message.error('上传失败')\r\n          }\r\n      }\r\n      const name = file.name\r\n      if(file.status === 'removed') {\r\n        const {data:res} = await axios.post('/manage/img/delete',{name})\r\n        if(res.status === 0) {\r\n            message.success('删除成功')\r\n        }else{\r\n            message.error('删除失败')\r\n        }\r\n      }\r\n      this.setState({ fileList })\r\n  };\r\n\r\n  componentDidMount(){\r\n    /**\r\n     * uid: '-1',\r\n        name: 'image.png',\r\n        status: 'done',\r\n        url: 'https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png'\r\n     */\r\n    const imgs = this.props.imgs\r\n      if(imgs){\r\n        const fileList = []\r\n        imgs.map((item,index)=>{\r\n          fileList.push({uid:-{index},name:item,url:BaseRoute.baseImageRoute+item})\r\n        })\r\n        this.setState({\r\n          fileList\r\n        })\r\n      }\r\n  }\r\n\r\n  render() {\r\n    const { previewVisible, previewImage, fileList, previewTitle } = this.state;\r\n    const uploadButton = (\r\n      <div>\r\n        <PlusOutlined />\r\n        <div style={{ marginTop: 8 }}>Upload</div>\r\n      </div>\r\n    );\r\n    return (\r\n      <>\r\n        <Upload\r\n          action={this.baseRoute + '/manage/img/upload'}\r\n          accept=\"image/*\"\r\n          listType=\"picture-card\"\r\n          fileList={fileList}\r\n          name=\"image\"\r\n          onPreview={this.handlePreview}\r\n          onChange={this.handleChange}\r\n        >\r\n          {fileList.length >= 8 ? null : uploadButton}\r\n        </Upload>\r\n        <Modal\r\n          visible={previewVisible}\r\n          title={previewTitle}\r\n          footer={null}\r\n          onCancel={this.handleCancel}\r\n        >\r\n          <img alt=\"example\" style={{ width: '100%' }} src={previewImage} />\r\n        </Modal>\r\n      </>\r\n    );\r\n  }\r\n}","import React from 'react'\r\nimport {EditorState, convertToRaw, ContentState} from 'draft-js'\r\nimport {Editor} from 'react-draft-wysiwyg'\r\nimport draftToHtml from 'draftjs-to-html'\r\nimport htmlToDraft from 'html-to-draftjs'\r\nimport 'react-draft-wysiwyg/dist/react-draft-wysiwyg.css'\r\nimport BaseRoute from '../../../static/router.js'\r\n\r\n//富文本编辑器，具体用法可看react-draft-wysiwyg官方文档 \r\nexport default class RichTextEditor extends React.Component{\r\n  state = {\r\n    editorState:EditorState.createEmpty()\r\n  }\r\n    constructor(props) {\r\n        super(props)\r\n        const html = this.props.detail\r\n        if (html) { // 如果有值, 根据html格式字符串创建一个对应的编辑对象\r\n            const contentBlock = htmlToDraft(html)\r\n            const contentState = ContentState.createFromBlockArray(contentBlock.contentBlocks)\r\n            const editorState = EditorState.createWithContent(contentState)\r\n            this.state = {\r\n            editorState,\r\n            }\r\n        } else {\r\n            this.state = {\r\n            editorState: EditorState.createEmpty(), // 创建一个没有内容的编辑对象\r\n            }\r\n        }\r\n    }\r\n\r\n    onEditorStateChange = (editorState) => {\r\n        this.setState({\r\n          editorState,\r\n        })\r\n    }\r\n\r\n    getDetail = () => {\r\n        // 返回输入数据对应的html格式的文本\r\n        return draftToHtml(convertToRaw(this.state.editorState.getCurrentContent()))\r\n    }\r\n\r\n    uploadImageCallBack = (file) => {\r\n      return new Promise(\r\n        (resolve, reject) => {\r\n          const xhr = new XMLHttpRequest()\r\n          xhr.open('POST', BaseRoute.baseRoute+'/manage/img/upload')\r\n          const data = new FormData()\r\n          data.append('image', file)\r\n          xhr.send(data)\r\n          xhr.addEventListener('load', () => {\r\n            const response = JSON.parse(xhr.responseText)\r\n            const url = response.data.url // 得到图片的url\r\n            resolve({data: {link: url}})\r\n          })\r\n          xhr.addEventListener('error', () => {\r\n            const error = JSON.parse(xhr.responseText)\r\n            reject(error)\r\n          })\r\n        }\r\n      )\r\n    }\r\n\r\n    render() {\r\n        const {editorState} = this.state\r\n        return (\r\n          <Editor\r\n            editorState={editorState}\r\n            editorStyle={{border: '1px solid black', minHeight: 200, paddingLeft: 10}}\r\n            onEditorStateChange={this.onEditorStateChange}\r\n            toolbar={{\r\n              image: { uploadCallback: this.uploadImageCallBack, alt: { present: true, mandatory: true } },\r\n            }}\r\n          />\r\n        )\r\n    }\r\n    \r\n}","import React from 'react'\r\nimport {Card,Form,Input, Cascader, Button,message} from 'antd'\r\nimport LinkButton from '../../../components/linkButton'\r\nimport {ArrowLeftOutlined} from '@ant-design/icons'\r\nimport axios from 'axios'\r\nimport PictureUpload from './pictureUpload.jsx'\r\nimport RichTextEditor from './rich-text-editor.jsx'\r\nconst {TextArea} = Input\r\nexport default class AddProduct extends React.Component{\r\n\r\n    state={\r\n        options:[\r\n        ]\r\n    }\r\n    //创建form表单的ref\r\n    form = React.createRef()\r\n    //创建pictureWall的ref\r\n    pw = React.createRef()\r\n    //创建富文本编辑器的ref\r\n    editor = React.createRef()\r\n\r\n    //获取选择一级分类后出现的二级分类的\r\n    loadData = async selectedOptions => {\r\n        //获取当前选中的一级分类\r\n        const targetOption = selectedOptions[0];\r\n        //出现加载的动画\r\n        targetOption.loading = true;\r\n        // load options lazily\r\n        \r\n        //获取二级分类信息\r\n        const res = await this.getCategory(targetOption.value)\r\n        //如果有二级分类\r\n        if(res && res.length>0){\r\n            //创建当前一级分类的子属性\r\n            targetOption['children'] = []\r\n            //停止加载动画\r\n            targetOption.loading = false;\r\n            //将二级分类添加到数组中\r\n            res.map(item => {\r\n                return targetOption['children'].push({\r\n                    value:item._id,\r\n                    label:item.name,\r\n                    isLeaf:true\r\n                })\r\n            })\r\n        //无二级分类\r\n        }else{\r\n            //停止加载动画\r\n            targetOption.loading = false;\r\n            //将当前一级分类设为叶子节点\r\n            targetOption.isLeaf = true\r\n        }\r\n        this.setState({\r\n            options:[...this.state.options]\r\n        })\r\n        \r\n      };\r\n    \r\n    //验证\r\n    validateNumber(rules,value){\r\n        if(value*1 > 0){\r\n            return Promise.resolve()\r\n        }else{\r\n            return Promise.reject('价格必须大于0')\r\n        }\r\n    }\r\n    \r\n    //初始化分类列表\r\n    initeCategory = async (categories) => {\r\n        const options =[]\r\n        //添加分类\r\n        categories.map(item => {\r\n           return options.push({\r\n                value:item._id,\r\n                label:item.name,\r\n                isLeaf:false\r\n            })\r\n        })\r\n        \r\n        //如果是修改商品\r\n        if(this.isPut ){\r\n            const {pCategoryId,categoryId} = this.product\r\n            if(pCategoryId !== '0'){\r\n                //根据一级分类id获取二级分类\r\n                const subCategory = await this.getCategory(pCategoryId)\r\n                const targetOption = options.find(item=>item.value === pCategoryId)\r\n                targetOption.children = []\r\n                subCategory.map(item => {\r\n                    return targetOption.children.push({\r\n                        value:item._id,\r\n                        label:item.name,\r\n                        isLeaf:true\r\n                    })\r\n                })\r\n            }\r\n            }\r\n        this.setState({\r\n            options\r\n        })\r\n    }\r\n\r\n    async getCategory(parentId){\r\n        const {data:res} = await axios.get('/manage/category/list',{params:{parentId}})\r\n        if(res.status === 0) {\r\n            //若分类是一级分类\r\n            if (parentId === '0') {\r\n                this.initeCategory(res.data)\r\n            }else{\r\n                return res.data\r\n            }\r\n        }\r\n    }\r\n\r\n    //添加或修改商品\r\n    onSubmit = async (values) => {\r\n        //获取图片、细节\r\n        const imgs = this.pw.current.getFileList()\r\n        const detail = this.editor.current.getDetail()\r\n        const {category,name,price,desc} = values\r\n        console.log(values)\r\n        let pCategoryId,categoryId\r\n        //判断是否是一级分类\r\n        if(category.length === 1){\r\n            pCategoryId = '0'\r\n            categoryId = category[0]\r\n        }else{\r\n            pCategoryId = category[0]\r\n            categoryId = category[1]\r\n        }\r\n        //判断是否是修改商品\r\n        if(!this.isPut){\r\n            const product = {name,detail,imgs,desc,price,pCategoryId,categoryId}\r\n            console.log(product)\r\n            const {data:res} = await axios.post('/manage/product/add',product)\r\n            if(res.status === 0) {\r\n                message.success('添加商品成功')\r\n            }\r\n        }else{\r\n            //修改商品需要传值_id\r\n            const {_id} = this.product\r\n            const product = {name,detail,imgs,desc,price,pCategoryId,categoryId,_id}\r\n            const {data:res} = await axios.post('/manage/product/update',product)\r\n            if(res.status === 0) {\r\n                message.success('更新商品成功')\r\n            }\r\n        }\r\n        //修改后返回\r\n        this.props.history.goBack()\r\n    }\r\n\r\n    \r\n    UNSAFE_componentWillMount () {\r\n        const product = this.props.location.state\r\n        this.isPut = !!product\r\n        this.product = product || {}\r\n        //判断是否是更改商品\r\n        if (this.isPut){\r\n            const {pCategoryId,categoryId} = product\r\n            if(pCategoryId === '0'){\r\n                this.category = [categoryId] || []\r\n            }else{\r\n                this.category = [pCategoryId,categoryId] || []\r\n            }   \r\n        }\r\n    }\r\n\r\n    //获取一级分类\r\n    componentDidMount(){\r\n        this.getCategory('0')\r\n    }\r\n\r\n    render(){\r\n        const title = (<span style={{marginRight:'10px'}}><LinkButton><ArrowLeftOutlined onClick={() => this.props.history.goBack()}/></LinkButton>{this.isPut?\"修改商品\":\"添加商品\"}</span>)\r\n        const {options}= this.state\r\n        const product = this.product\r\n        return(\r\n            <Card title={title} >\r\n                <Form\r\n                    ref={this.form}\r\n                    \r\n                    labelCol={{span:3}}\r\n                    wrapperCol={{span:8}}\r\n                    onFinish={this.onSubmit}\r\n                >\r\n                    <Form.Item label=\"商品名称\"\r\n                        name=\"name\"\r\n                        initialValue={product.name}\r\n                        rules={[{required:true,message:\"必须输入商品名称\"}]}\r\n                    >\r\n                        <Input  placeholder=\"请输入商品名称\"></Input>\r\n                    </Form.Item>\r\n                    <Form.Item \r\n                        label=\"商品描述\"\r\n                        name=\"desc\"\r\n                        initialValue={product.desc}\r\n                        rules={[{required:true,message:\"商品描述必须输入\"}]}\r\n                    >\r\n                        <TextArea autoSize={{ minRows: 2, maxRows: 6 }} placeholder=\"请输入商品描述\"></TextArea>\r\n                    </Form.Item>\r\n                    <Form.Item label=\"商品价格\"\r\n                        name=\"price\"\r\n                        initialValue={product.price}\r\n                        rules={[{required:true,message:\"商品价格必须输入\"},\r\n                            {validator:this.validateNumber}\r\n                        ]}\r\n                    >\r\n                        <Input placeholder=\"请输入商品的价格\" type=\"number\" addonAfter=\"元\"></Input>\r\n                    </Form.Item>\r\n                    <Form.Item label=\"商品分类\"\r\n                        name=\"category\"\r\n                        initialValue={this.category}\r\n                        rules={[{required:true,message:\"商品分类必须选择\"}]}\r\n                    >\r\n                        <Cascader options={options} loadData={this.loadData} placeholder=\"Please select\" />\r\n                    </Form.Item>\r\n                    <Form.Item label=\"商品图片\">\r\n                        <PictureUpload imgs={product.imgs} ref={this.pw}></PictureUpload>\r\n                    </Form.Item>\r\n                    <Form.Item label=\"商品详情\" wrapperCol={{span:18}}>\r\n                       <RichTextEditor \r\n                     detail={product.detail} ref={this.editor}></RichTextEditor>\r\n                    </Form.Item>\r\n                    <Form.Item  wrapperCol={ {offset: 2, span: 4} }><Button type=\"primary\" htmlType=\"submit\">提交</Button></Form.Item>\r\n                </Form>\r\n            </Card>\r\n        )\r\n    }\r\n}","import React from 'react'\r\nimport {Card,Table,Select,Button,Input, message} from 'antd'\r\nimport {PlusOutlined} from '@ant-design/icons'\r\nimport LinkButton from '../../../components/linkButton'\r\nimport axios from 'axios'\r\nconst Option = Select.Option\r\nexport default class Home extends React.Component{\r\n    state = {\r\n        columns:[\r\n            {\r\n                title: '商品名称',\r\n                dataIndex: 'name',\r\n                key: 'name',\r\n              },\r\n              {\r\n                title: '商品详情',\r\n                dataIndex: 'desc',\r\n                key: 'desc',\r\n              },\r\n              {\r\n                title: '价格',\r\n                dataIndex: 'price',\r\n                key: 'price',\r\n                render: (c)=>{return(\"￥\"+c)}\r\n              },\r\n              {\r\n                title: '状态',\r\n                key: 'status',\r\n                width:160,\r\n                render:(product)=> {\r\n                    let newStatus = product.status === 1?2:1\r\n                    const {_id} = product\r\n                    return( <span > <Button onClick={()=>this.updateStatus(_id, newStatus)} type=\"primary\">{product.status === 1?'下架':'上架'}</Button> <span>{product.status === 1?'在售':'下架'}</span></span>)\r\n                }\r\n              },\r\n              {\r\n                title: '操作',\r\n                key: 'operation',\r\n                width:100,\r\n                render:(product)=>{return (<span><LinkButton onClick={()=>{this.props.history.push('product/details',product)}}>详情</LinkButton> <LinkButton onClick={() => this.props.history.push('/product/addProduct',product)}>修改</LinkButton></span>)}\r\n              },\r\n        ],\r\n        dataSource:[\r\n        ],\r\n        total:0,\r\n        pageSize:3\r\n    }\r\n\r\n    //更新商品状态\r\n    updateStatus = async (productId, status) => {\r\n        const {data:result} = await axios.post('/manage/product/updateStatus',{productId,status})\r\n        if(result.status===0) {\r\n          message.success('更新商品成功')\r\n          this.getProducts(this.pageNum)\r\n        }\r\n      }\r\n\r\n    //获取商品\r\n    getProducts = async (pageNum) => {\r\n        this.pageNum = pageNum\r\n        const {data:res} = await axios.get('/manage/product/list',{params:{pageNum:pageNum,pageSize:this.state.pageSize}})\r\n        if(res.status === 0){\r\n            this.setState({\r\n                total:res.data.total,\r\n                dataSource:res.data.list\r\n            })\r\n        }\r\n    }\r\n    componentDidMount(){\r\n        this.getProducts(1)\r\n    }\r\n    render(){\r\n        const title = (<span>\r\n                <Select value=\"0\" style={{width:150}}>\r\n                    <Option value=\"0\">按名称搜索</Option>\r\n                    <Option value=\"1\">按详情搜索</Option>\r\n                </Select>\r\n                <Input style={{width:300,margin:10}} name=\"serachInfo\" placeholder=\"关键字\"></Input>\r\n                <Button type=\"primary\">搜索</Button>\r\n            </span>)\r\n        const extra = (<Button type=\"primary\" onClick={()=> {this.props.history.push('/product/addProduct')}}> <PlusOutlined  />添加商品</Button>)\r\n        const {dataSource,columns,total} = this.state\r\n        return(\r\n            <Card title={title} extra={extra} style={{ width: '100%' }}>\r\n                <Table \r\n                    pagination={{\r\n                        current: this.pageNum,\r\n                        total,\r\n                        defaultPageSize: 3,\r\n                        showQuickJumper: true,\r\n                        onChange: this.getProducts\r\n                    }}\r\n                    rowKey=\"_id\"\r\n                    dataSource={dataSource} \r\n                    columns={columns}>\r\n                </Table>\r\n            </Card>\r\n        )\r\n    }\r\n}","import React, {Component} from 'react'\r\nimport {\r\n  Card,\r\n  List\r\n} from 'antd'\r\nimport {ArrowLeftOutlined} from '@ant-design/icons'\r\nimport axios from 'axios'\r\nimport LinkButton from '../../../components/linkButton'\r\nimport BaseRoute from '../../../static/router.js'\r\n\r\n\r\nconst Item = List.Item\r\n\r\n\r\n/*\r\nProduct的详情子路由组件\r\n */\r\nexport default class ProductDetail extends Component {\r\n\r\n  state = {\r\n    cName1: '', // 一级分类名称\r\n    cName2: '', // 二级分类名称\r\n  }\r\n\r\n  async componentDidMount () {\r\n\r\n    // 得到当前商品的分类ID\r\n    const {pCategoryId, categoryId} = this.props.location.state\r\n    if(pCategoryId==='0') { // 一级分类下的商品\r\n      const {data:result} = await axios.get('/manage/category/info',{params:{categoryId}})\r\n      const cName1 = result.data.name\r\n      this.setState({cName1})\r\n    } else { // 二级分类下的商品\r\n\r\n      // 一次性发送多个请求, 只有都成功了, 才正常处理\r\n      const results = await Promise.all([axios.get('/manage/category/info',{params:{categoryId:pCategoryId}}), axios.get('/manage/category/info',{params:{categoryId}})])\r\n      const cName1 = results[0].data.data.name\r\n      const cName2 = results[1].data.data.name\r\n      this.setState({\r\n        cName1,\r\n        cName2\r\n      })\r\n    }\r\n\r\n  }\r\n\r\n  render() {\r\n\r\n    // 读取携带过来的state数据\r\n    const {name, desc, price, detail, imgs} = this.props.location.state\r\n    const {cName1, cName2} = this.state\r\n\r\n    const title = (\r\n      <span>\r\n        <LinkButton>\r\n          <ArrowLeftOutlined\r\n            style={{marginRight: 10, fontSize: 20}}\r\n            onClick={() => this.props.history.goBack()}\r\n          />\r\n        </LinkButton>\r\n\r\n        <span>商品详情</span>\r\n      </span>\r\n    )\r\n    return (\r\n      <Card title={title} className='product-detail'>\r\n        <List>\r\n          <Item>\r\n            <span className=\"left\">商品名称:</span>\r\n            <span>{name}</span>\r\n          </Item>\r\n          <Item>\r\n            <span className=\"left\">商品描述:</span>\r\n            <span>{desc}</span>\r\n          </Item>\r\n          <Item>\r\n            <span className=\"left\">商品价格:</span>\r\n            <span>{price}元</span>\r\n          </Item>\r\n          <Item>\r\n            <span className=\"left\">所属分类:</span>\r\n            <span>{cName1} {cName2 ? ' --> '+cName2 : ''}</span>\r\n          </Item>\r\n          <Item>\r\n            <span className=\"left\">商品图片:</span>\r\n            <span>\r\n              {\r\n                imgs.map(img => (\r\n                  <img\r\n                    style={{height:'80px',width:'80px'}}\r\n                    key={img}\r\n                    src={BaseRoute.baseImageRoute + img}\r\n                    className=\"product-img\"\r\n                    alt=\"img\"\r\n                  />\r\n                ))\r\n              }\r\n            </span>\r\n          </Item>\r\n          <Item>\r\n            <span className=\"left\">商品详情:</span>\r\n            <span dangerouslySetInnerHTML={{__html: detail}}>\r\n            </span>\r\n          </Item>\r\n\r\n        </List>\r\n      </Card>\r\n    )\r\n  }\r\n}","import React from 'react'\r\nimport {Switch,Route,Redirect} from 'react-router-dom'\r\nimport AddProduct from './pages/addProduct.jsx'\r\nimport Home from './pages/home.jsx'\r\nimport Detail from './pages/detail.jsx'\r\n\r\n//商品页面组件\r\nexport default class Product extends React.Component{\r\n    render(){\r\n        return(\r\n            <Switch>\r\n                <Route path=\"/product\" exact={true} component={Home}></Route>\r\n                <Route path=\"/product/addProduct\" component={AddProduct}></Route>\r\n                <Route path=\"/product/details\" component={Detail}></Route>\r\n                <Redirect to=\"/product\"></Redirect>\r\n            </Switch>\r\n        )\r\n    }\r\n}","import React, {Component} from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport {\r\n  Form,\r\n  Input\r\n} from 'antd'\r\n\r\nconst Item = Form.Item\r\n\r\n/*\r\n添加分类的form组件\r\n */\r\nexport default class AddForm extends Component {\r\n\r\n  form = React.createRef()\r\n\r\n  componentDidMount () {\r\n    this.props.setForm(this.form)\r\n  }\r\n\r\n  render() {\r\n    // 指定Item布局的配置对象\r\n    const formItemLayout = {\r\n      labelCol: { span: 4 },  // 左侧label的宽度\r\n      wrapperCol: { span: 15 }, // 右侧包裹的宽度\r\n    }\r\n\r\n    return (\r\n      <Form ref={this.form}>\r\n        <Item label='角色名称' {...formItemLayout}\r\n              initialValue= ''\r\n              rules = {[{required: true, message: '角色名称必须输入'}]}\r\n              name=\"roleName\"\r\n        >\r\n              <Input placeholder='请输入角色名称'/>\r\n        </Item>\r\n      </Form>\r\n    )\r\n  }\r\n}\r\n","//格式化时间工具\r\nexport default function formateDate(time) {\r\n    if (!time) return ''\r\n    let date = new Date(time)\r\n    return date.getFullYear() + '-' + (date.getMonth() + 1) + '-' + date.getDate()\r\n      + ' ' + date.getHours() + ':' + date.getMinutes() + ':' + date.getSeconds()\r\n  }","import React, {PureComponent} from 'react'\r\nimport {\r\n  Form,\r\n  Input,\r\n  Tree\r\n} from 'antd'\r\nimport menuList from '../../static/menuList'\r\n\r\nconst Item = Form.Item\r\n\r\nconst { TreeNode } = Tree;\r\n\r\n/*\r\n添加分类的form组件\r\n */\r\nexport default class AuthForm extends PureComponent {\r\n\r\n  constructor (props) {\r\n    super(props)\r\n\r\n    // 根据传入角色的menus生成初始状态\r\n    const {menus} = this.props.role\r\n    this.state = {\r\n      checkedKeys: menus\r\n    }\r\n  }\r\n\r\n  /*\r\n  为父组件提交获取最新menus数据的方法\r\n   */\r\n  getMenus = () => this.state.checkedKeys\r\n\r\n\r\n  getTreeNodes = (menuList) => {\r\n    return menuList.reduce((pre, item) => {\r\n        if(item.children){\r\n            pre.push(\r\n                {\r\n                    title:item.title,\r\n                    key:item.key,\r\n                    children:this.getTreeNodes(item.children)\r\n                }\r\n              )\r\n        }else{\r\n            pre.push(\r\n                {\r\n                    title:item.title,\r\n                    key:item.key\r\n                }\r\n              )\r\n        }\r\n      \r\n      return pre\r\n    }, [])\r\n  }\r\n\r\n  // 选中某个node时的回调\r\n  onCheck = checkedKeys => {\r\n    console.log('onCheck', checkedKeys);\r\n    this.setState({ checkedKeys });\r\n  };\r\n\r\n  \r\n\r\n\r\n  UNSAFE_componentWillMount(){\r\n      this.treeNodes = this.getTreeNodes(menuList)\r\n  }\r\n\r\n  // 根据新传入的role来更新checkedKeys状态\r\n  /*\r\n  当组件接收到新的属性时自动调用\r\n   */\r\n  componentWillReceiveProps (nextProps) {\r\n    const menus = nextProps.role.menus\r\n    this.setState({\r\n      checkedKeys: menus\r\n    })\r\n    // this.state.checkedKeys = menus\r\n  }\r\n\r\n  render() {\r\n    console.log('AuthForm render()')\r\n    const {role} = this.props\r\n    const {checkedKeys} = this.state\r\n    // 指定Item布局的配置对象\r\n    const formItemLayout = {\r\n      labelCol: { span: 4 },  // 左侧label的宽度\r\n      wrapperCol: { span: 15 }, // 右侧包裹的宽度\r\n    }\r\n\r\n    return (\r\n      <div>\r\n        <Item label='角色名称' {...formItemLayout}>\r\n          <Input value={role.name} disabled/>\r\n        </Item>\r\n\r\n        <Tree\r\n          checkable\r\n          defaultExpandAll={true}\r\n          checkedKeys={checkedKeys}\r\n          onCheck={this.onCheck}\r\n          treeData={this.treeNodes}\r\n        >\r\n        </Tree>\r\n      </div>\r\n    )\r\n  }\r\n}","import React, {Component} from 'react'\r\nimport {\r\n  Card,\r\n  Button,\r\n  Table,\r\n  Modal,\r\n  message\r\n} from 'antd'\r\nimport axios from 'axios'\r\nimport AddForm from './add-form.jsx'\r\nimport formateDate from './formateDate.js'\r\nimport AuthForm from './auth-form.jsx'\r\nimport store from 'store'\r\n/*\r\n角色路由\r\n */\r\nexport default class Role extends Component {\r\n\r\n  state = {\r\n    roles: [], // 所有角色的列表\r\n    role: {}, // 选中的role\r\n    isShowAdd: false, // 是否显示添加界面\r\n    isShowAuth: false, // 是否显示设置权限界面\r\n  }\r\n\r\n  auth = React.createRef()\r\n\r\n  initColumn = () => {\r\n    this.columns = [\r\n      {\r\n        title: '角色名称',\r\n        dataIndex: 'name'\r\n      },\r\n      {\r\n        title: '创建时间',\r\n        dataIndex: 'create_time',\r\n        render: (create_time) => formateDate(create_time)\r\n      },\r\n      {\r\n        title: '授权时间',\r\n        dataIndex: 'auth_time',\r\n        render: (create_time) => formateDate(create_time)\r\n      },\r\n      {\r\n        title: '授权人',\r\n        dataIndex: 'auth_name'\r\n      },\r\n    ]\r\n  }\r\n\r\n  getRoles = async () => {\r\n    const {data:result} = await axios.get('/manage/role/list')\r\n    if (result.status===0) {\r\n      const roles = result.data\r\n      console.log(roles)\r\n      this.setState({\r\n        roles\r\n      })\r\n    }\r\n  }\r\n\r\n\r\n  onRow = (role) => {\r\n    return {\r\n      onClick: event => { // 点击行\r\n        console.log('row onClick()', role)\r\n        // alert('点击行')\r\n        this.setState({\r\n          role\r\n        })\r\n      },\r\n    }\r\n  }\r\n\r\n  /*\r\n  添加角色\r\n   */\r\n  addRole = async () => {\r\n    console.log(this.form)\r\n    console.log(this.form.current.getFieldValue('roleName'))\r\n    const roleName = this.form.current.getFieldValue('roleName')\r\n    const {data:res} = await axios.post('/manage/role/add',{roleName})\r\n    if (res.status === 0) {\r\n        this.setState({\r\n            isShowAdd:false\r\n        })\r\n        message.success('添加成功')\r\n        this.getRoles()\r\n    }\r\n  }\r\n\r\n  /*\r\n  更新角色\r\n   */\r\n    updateRole = async () => {\r\n        const menus = this.auth.current.getMenus()\r\n        const auth_name = store.get('user').username\r\n        const auth_time = formateDate\r\n        const _id = this.state.role._id\r\n        const {data:res} = await axios.post('/manage/role/update',{menus,auth_name,auth_time,_id})\r\n        if(res.status === 0 ){\r\n          if(_id === store.get('user').role_id){\r\n            message.info('修改了权限，请重新登入')\r\n            store.remove('user')\r\n            this.props.history.replace('/login')\r\n          }else{\r\n            message.success('权限添加成功')\r\n            this.getRoles()\r\n            this.setState({\r\n                isShowAuth:false\r\n            })\r\n          }\r\n        }\r\n    }\r\n\r\n   /**\r\n    * 获取表单form\r\n    */\r\n   setForm = (form) => {\r\n       this.form = form || {}\r\n   }\r\n\r\n   setTree = (auth) => {\r\n       this.auth = auth\r\n   }\r\n\r\n  componentWillMount () {\r\n    this.initColumn()\r\n  }\r\n\r\n  componentDidMount () {\r\n    this.getRoles()\r\n  }\r\n\r\n  render() {\r\n\r\n    const {roles, role, isShowAdd, isShowAuth} = this.state\r\n\r\n    const title = (\r\n      <span>\r\n        <Button type='primary' onClick={() => this.setState({isShowAdd: true})}>创建角色</Button> &nbsp;&nbsp;\r\n        <Button type='primary' disabled={!role._id} onClick={() => this.setState({isShowAuth: true})}>设置角色权限</Button>\r\n      </span>\r\n    )\r\n    /**\r\n     * \r\n     */\r\n    return (\r\n      <Card title={title}>\r\n        <Table\r\n          bordered\r\n          rowKey='_id'\r\n          dataSource={roles}\r\n          columns={this.columns}\r\n          pagination={{defaultPageSize: 3}}\r\n          rowSelection={{\r\n            type: 'radio',\r\n            selectedRowKeys: [role._id],\r\n            onSelect: (role) => { // 选择某个radio时回调\r\n              this.setState({\r\n                role\r\n              })\r\n            }\r\n\r\n          }}\r\n          onRow={this.onRow}\r\n        />\r\n\r\n        <Modal\r\n          title=\"添加角色\"\r\n          visible={isShowAdd}\r\n          onOk={this.addRole}\r\n          onCancel={() => {\r\n            this.setState({isShowAdd: false})\r\n          }}\r\n        >\r\n          <AddForm setForm={(form) => this.setForm(form)}></AddForm>\r\n        </Modal>\r\n        \r\n        <Modal\r\n          title=\"设置角色权限\"\r\n          visible={isShowAuth}\r\n          onOk={this.updateRole}\r\n          onCancel={() => {\r\n            this.setState({isShowAuth: false})\r\n          }}\r\n        >\r\n          <AuthForm ref={this.auth} role={role}/>\r\n        </Modal>\r\n        \r\n      </Card>\r\n    )\r\n  }\r\n}","import React, {PureComponent} from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport {\r\n  Form,\r\n  Select,\r\n  Input\r\n} from 'antd'\r\n\r\nconst Item = Form.Item\r\nconst Option = Select.Option\r\n\r\n/*\r\n添加/修改用户的form组件\r\n */\r\nexport default class UserForm extends PureComponent {\r\n  \r\n  state={\r\n    user:{}\r\n  }\r\n\r\n  form = React.createRef()\r\n\r\n  UNSAFE_componentWillMount(){\r\n      this.setState({\r\n          user:this.props.user\r\n      })\r\n  }\r\n\r\n  componentDidMount () {\r\n    this.props.setForm(this.form)\r\n  }\r\n\r\n  UNSAFE_componentWillReceiveProps(nextProps){\r\n    this.setState({\r\n        user:nextProps.user\r\n    })\r\n    console.log(nextProps)\r\n    const user = nextProps.user\r\n    //根据是否有接收到user来初始化表单\r\n    if(user.username !== undefined){\r\n        this.form.current.setFieldsValue(user)\r\n    }else{\r\n        this.form.current.setFieldsValue({\r\n            username: '',\r\n            role_id:'',\r\n            phone:'',\r\n            email:''\r\n        })\r\n    }\r\n    \r\n  }\r\n\r\n  render() {\r\n    const {user} = this.state\r\n    const {roles} = this.props\r\n    // 指定Item布局的配置对象\r\n    const formItemLayout = {\r\n      labelCol: { span: 4 },  // 左侧label的宽度\r\n      wrapperCol: { span: 15 }, // 右侧包裹的宽度\r\n    }\r\n\r\n    return (\r\n      <Form {...formItemLayout} ref={this.form}>\r\n        <Item label='用户名' name=\"username\" initialValue={user.username}>\r\n            <Input placeholder='请输入用户名'/>\r\n        </Item>\r\n\r\n        {\r\n          user._id ? null : (\r\n            <Item label='密码' name=\"password\" initialValue={user.password}>\r\n                <Input type='password' placeholder='请输入密码'/>\r\n            </Item>\r\n          )\r\n        }\r\n\r\n        <Item label='手机号' name=\"phone\" initialValue={user.phone}>\r\n            <Input placeholder='请输入手机号'/>\r\n        </Item>\r\n        <Item label='邮箱' name=\"email\" initialValue={user.email}>\r\n            <Input placeholder='请输入邮箱'/>\r\n        </Item>\r\n\r\n        <Item label='角色' name=\"role_id\" initialValue={user.role_id}>\r\n            <Select>\r\n            {\r\n                roles.map(role => <Option key={role._id} value={role._id}>{role.name}</Option>)\r\n            }\r\n            </Select>\r\n        </Item>\r\n      </Form>\r\n    )\r\n  }\r\n}","import React, {Component} from 'react'\r\nimport {\r\n  Card,\r\n  Button,\r\n  Table,\r\n  Modal,\r\n  message\r\n} from 'antd'\r\nimport formateDate from \"../role/formateDate\"\r\nimport LinkButton from \"../../components/linkButton\"\r\nimport axios from 'axios'\r\nimport UserForm from './user-form.jsx'\r\n\r\n/*\r\n用户路由\r\n */\r\nexport default class User extends Component {\r\n\r\n  state = {\r\n    users: [], // 所有用户列表\r\n    roles: [], // 所有角色列表\r\n    isShow: false, // 是否显示确认框\r\n  }\r\n\r\n  initColumns = () => {\r\n    this.columns = [\r\n      {\r\n        title: '用户名',\r\n        dataIndex: 'username'\r\n      },\r\n      {\r\n        title: '邮箱',\r\n        dataIndex: 'email'\r\n      },\r\n\r\n      {\r\n        title: '电话',\r\n        dataIndex: 'phone'\r\n      },\r\n      {\r\n        title: '注册时间',\r\n        dataIndex: 'create_time',\r\n        render: formateDate\r\n      },\r\n      {\r\n        title: '所属角色',\r\n        dataIndex: 'role_id',\r\n        render: (role_id) => this.roleNames[role_id]\r\n      },\r\n      {\r\n        title: '操作',\r\n        render: (user) => (\r\n          <span>\r\n            <LinkButton style={{marginRight:5}} onClick={() => this.showUpdate(user)}>修改</LinkButton>&nbsp;\r\n            <LinkButton onClick={() => this.deleteUser(user)}>删除</LinkButton>\r\n          </span>\r\n        )\r\n      },\r\n    ]\r\n  }\r\n\r\n  /*\r\n  根据role的数组, 生成包含所有角色名的对象(属性名用角色id值)\r\n   */\r\n  initRoleNames = (roles) => {\r\n    const roleNames = roles.reduce((pre, role) => {\r\n      pre[role._id] = role.name\r\n      return pre\r\n    }, {})\r\n    // 保存\r\n    this.roleNames = roleNames\r\n  }\r\n\r\n  /*\r\n  显示添加界面\r\n   */\r\n  showAdd = () => {\r\n    this.user = null // 去除前面保存的user\r\n    this.setState({isShow: true})\r\n  }\r\n\r\n  /*\r\n  显示修改界面\r\n   */\r\n  showUpdate = (user) => {\r\n    this.user = user // 保存user\r\n    this.setState({\r\n      isShow: true\r\n    })\r\n  }\r\n\r\n  /*\r\n  删除指定用户\r\n   */\r\n  deleteUser = (user) => {\r\n    Modal.confirm({\r\n      title: `确认删除${user.username}吗?`,\r\n      onOk: async () => {\r\n        const {data:result} = await axios.post('/manage/user/delete',{userId:user._id})\r\n        if(result.status===0) {\r\n          message.success('删除用户成功!')\r\n          this.getUsers()\r\n        }\r\n      }\r\n    })\r\n  }\r\n\r\n  /*\r\n  添加/更新用户\r\n   */\r\n  addOrUpdateUser = async () => {\r\n\r\n    this.setState({isShow: false})\r\n\r\n    // 1. 收集输入数据\r\n    const user = this.form.current.getFieldsValue()\r\n    this.form.current.resetFields()\r\n    // 如果是更新, 需要给user指定_id属性\r\n    if (this.user) {\r\n      user._id = this.user._id\r\n    }\r\n    console.log(user)\r\n    // 2. 提交更新的请求\r\n    const {data:result} = await axios.post(user._id?'/manage/user/update':'/manage/user/add',user)\r\n    \r\n    // 3. 更新列表显示\r\n    if(result.status===0) {\r\n      message.success(`${this.user ? '修改' : '添加'}用户成功`)\r\n      this.getUsers()\r\n    }else {\r\n      message.error(result.msg)\r\n    }\r\n  }\r\n\r\n  getUsers = async () => {\r\n    const {data:result} = await axios.get('/manage/user/list')\r\n    if (result.status===0) {\r\n      const {users, roles} = result.data\r\n      this.initRoleNames(roles)\r\n      this.setState({\r\n        users,\r\n        roles\r\n      })\r\n    }\r\n  }\r\n\r\n  UNSAFE_componentWillMount () {\r\n    this.initColumns()\r\n  }\r\n\r\n  componentDidMount () {\r\n    this.getUsers()\r\n  }\r\n\r\n\r\n  render() {\r\n\r\n    const {users, roles, isShow} = this.state\r\n    const user = this.user || {}\r\n\r\n    const title = <Button type='primary' onClick={this.showAdd}>创建用户</Button>\r\n\r\n    return (\r\n      <Card title={title}>\r\n        <Table\r\n          bordered\r\n          rowKey='_id'\r\n          dataSource={users}\r\n          columns={this.columns}\r\n          pagination={{defaultPageSize: 2}}\r\n        />\r\n\r\n        <Modal\r\n          title={user._id ? '修改用户' : '添加用户'}\r\n          visible={isShow}\r\n          onOk={this.addOrUpdateUser}\r\n          onCancel={() => {\r\n            this.form.current.resetFields()\r\n            this.setState({isShow: false})\r\n          }}\r\n        >\r\n          <UserForm\r\n            setForm={form => this.form = form}\r\n            roles={roles}\r\n            user={user}\r\n          />\r\n        </Modal>\r\n\r\n      </Card>\r\n    )\r\n  }\r\n}","import React from 'react'\r\nimport {Route, Switch} from 'react-router-dom' \r\nimport {Redirect} from 'react-router-dom'\r\n//引入store管理localstorage\r\nimport store from 'store'\r\n\r\nimport { Layout } from 'antd';\r\nimport './admin.less'\r\n//引入各个pages组件\r\nimport LeftNav from '../../components/left-nav/left-nav.jsx'\r\nimport Header from '../../components/header/header.jsx'\r\nimport Home from '../home/home'\r\nimport Category from '../category/category'\r\nimport Product from '../product/product'\r\nimport Role from '../role/role'\r\nimport User from '../user/user'\r\nconst { Footer, Sider, Content } = Layout;\r\n\r\n//后台管理的组件\r\nexport default class Admin extends React.Component{\r\n    constructor(props){\r\n        super(props)\r\n        this.state={\r\n            user:null\r\n        }\r\n    }\r\n\r\n    UNSAFE_componentWillMount(){\r\n        //将user保存到localStorage中作为标识\r\n        let user = store.get('user')\r\n        this.setState({\r\n            user\r\n        })\r\n    }\r\n    \r\n    render(){\r\n        const user = this.state.user;\r\n        //判断是否登入，如果没有登入则跳转到登入页面\r\n        if(!user || !user._id) {\r\n            return <Redirect to=\"/login\"></Redirect>\r\n        }\r\n        return (\r\n            <Layout className=\"container\" >\r\n                <Sider style={{ height: '100vh', left: 0,overflow: 'auto',position: 'fixed',}}>\r\n                    <LeftNav {...this.props}></LeftNav>\r\n                </Sider>\r\n                <Layout\r\n                style={{ marginLeft: 200,padding: 10 }}\r\n                >\r\n                    <Header {...this.props} className=\"header\" username={user.username}></Header>\r\n                    <Content className=\"content\" style={{backgroundColor:'white',margin:'15px 0 0 0',minHeight:'100vh'}}>\r\n                    <Switch>\r\n                        <Route path='/home' component={Home}/>\r\n                        <Route path='/category' component={Category}/>\r\n                        <Route path='/product' component={Product}/>\r\n                        <Route path='/role' component={Role}/>\r\n                        <Route path='/user' component={User}/>\r\n                        <Redirect to='/home' />\r\n                    </Switch>\r\n                    </Content>\r\n                    <Footer className=\"footer\">如页面显示不全，建议使用谷歌浏览器</Footer>\r\n                </Layout>\r\n            </Layout>\r\n        )\r\n    }\r\n}","import React from 'react';\r\nimport {BrowserRouter, Route, Switch} from 'react-router-dom'\r\nimport Login from './pages/login/login.jsx'\r\nimport Admin from './pages/admin/admin.jsx'\r\n\r\n//zhushi\r\nexport default class App extends React.Component{\r\n  render(){\r\n    return (\r\n      <BrowserRouter>\r\n        <Switch>\r\n          <Route path=\"/login\" component={Login}></Route>\r\n          <Route path=\"/\" component={Admin}></Route>\r\n        </Switch>\r\n      </BrowserRouter>\r\n    )\r\n  }\r\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\n\n\n//import 'antd/dist/antd.css'\n\nimport Container from './App'\nReactDOM.render(\n  <Container ></Container>,\n  document.getElementById('root')\n)"],"sourceRoot":""}